/*!
 * angular-nz-input-formats
 * Angular directives to validate and format NZ-specific input types
 * @version v0.1.11
 * @link https://github.com/nikrolls/angular-nz-input-formats
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,r,e){var s;!function(t){t.module=r.module("nzInputFormats",[])}(s||(s={}));var s;!function(t){var s=function(){function t(t,s){void 0===t&&(t=null),void 0===s&&(s=null),this.require="ngModel",this.restrict="A",this.link=null,this.name=e,this.options={mask:null},this.mask=null,this.maskChars={"*":/./,A:/[A-Za-z]/,9:/[0-9]/},this.scope=null,this.elem=null,this.ctrl=null,this.document=null,this.lastLen=0,this.setMask(t),s&&(this.maskChars=s),this.link=r.bind(this,this.doLink)}return t.prototype.setMask=function(t){t!==this.options.mask&&(this.mask=t.split(""),this.options.mask=t,this.elem&&this.parser(this.elem.val()))},t.Factory=function(r){var e=new t;return e.document=r[0],e},t.prototype.doLink=function(t,e,s,i){this.scope=t,this.elem=e,this.ctrl=i,s.$observe(this.name,r.bind(this,this.processAttributeValue)),i.$formatters.push(r.bind(this,this.formatter)),i.$parsers.push(r.bind(this,this.parser)),i.$validators[this.name]=r.bind(this,this.validator)},t.prototype.processAttributeValue=function(t){var e=this.scope.$eval(t);e&&(e.mask&&this.setMask(e.mask),this.options=r.extend(this.options,e),this.ctrl.$$parseAndValidate())},t.prototype.formatter=function(t){var r=this;if(void 0===t&&(t=""),!this.mask)return t;t=String(t);var e="",s=0;return this.mask.some(function(i){return s>=t.length?!0:void(e+=r.maskChars.hasOwnProperty(i)?t.charAt(s++):i)}),e},t.prototype.parser=function(t){var r=this;if(void 0===t&&(t=""),!this.mask)return t;var e=t.split(""),s=t.length,i=[];this.mask.every(function(t){var s=e[0];if(r.maskChars.hasOwnProperty(t)){for(;e.length&&!e[0].match(r.maskChars[t]);)e.shift();e.length&&i.push(e.shift())}else s===t&&e.shift();return e.length>0});var n=i.join(""),o=this.formatter(n),a=this.elem[0].selectionStart;if(s>this.lastLen){var h=this.mask[a-1],u=this.maskChars.hasOwnProperty(h);if(u)t.charAt(a-1).match(this.maskChars[h])||a--;else for(;a<o.length&&!this.maskChars.hasOwnProperty(this.mask[a-1]);)a++}return this.lastLen=o.length,this.elem.val(o),this.ctrl.$setViewValue(o),this.document.activeElement===this.elem[0]&&(this.elem[0].selectionStart=this.elem[0].selectionEnd=a),n},t.prototype.validator=function(){return"undefined"==typeof this.ctrl.$viewValue||""===this.ctrl.$viewValue?!0:this.mask?this.ctrl.$viewValue.length===this.mask.length:!0},t}();t.SimpleInputMask=s,t.module.directive("nzSimpleInputMask",["$document",s.Factory])}(s||(s={}));var s,i=this.__extends||function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);e.prototype=r.prototype,t.prototype=new e};!function(t){var r=function(t){function r(){t.call(this),this.shortMask="99-9999-9999999-99",this.longMask="99-9999-9999999-999",this.options={mask:null,strict:!1},this.prefixes={"01":{from:1,to:5699},12:{from:3e3,to:3499},"02":{from:1,to:1299},31:{from:2800,to:2849},25:{from:2500,to:2599},30:{from:2900,to:2956},38:{from:9e3,to:9499},"08":{from:0,to:9999},"06":{from:1,to:1499},11:{from:5e3,to:8999},21:{from:4800,to:4899},15:{from:3900,to:3999},18:{from:3500,to:3599},16:{from:4400,to:4499},20:{from:4100,to:4199},14:{from:4700,to:4799},13:{from:4900,to:4799},19:{from:4600,to:4649},17:{from:3300,to:3399},22:{from:4e3,to:4049},23:{from:3700,to:3799},29:{from:0,to:9999},24:{from:4300,to:4349},"03":{from:1,to:1999}},this.setMask(this.shortMask)}return i(r,t),r.Factory=function(t){var e=new r;return e.document=t[0],e},r.prototype.parser=function(r){this.setMask(r.replace(/\D/g,"").length<=15?this.shortMask:this.longMask);var e=t.prototype.parser.call(this,r);return 15===e.length&&(e=e.substr(0,13)+"0"+e.substr(-2)),e},r.prototype.validator=function(){var r=t.prototype.validator.call(this);if(!this.options.strict)return r;var e=this.ctrl.$viewValue;if("undefined"===e||""===e)return!0;if(e=e.replace(/\D/g,""),e.length<15||e.length>16)return!1;var s=e.substr(0,2);if(this.prefixes.hasOwnProperty(s)){var i=this.prefixes[s],n=e.substr(2,4);if(4===n.length){var o=Number(n);return r&&o>=i.from&&o<=i.to}}return!1},r}(t.SimpleInputMask);t.NZBankNumber=r,t.module.directive("nzBankNumber",["$document",r.Factory])}(s||(s={}));var s,i=this.__extends||function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);e.prototype=r.prototype,t.prototype=new e};!function(t){var r=function(t){function r(){t.call(this),this.shortMask="99-999-999",this.longMask="999-999-999",this.setMask(this.shortMask)}return i(r,t),r.Factory=function(t){var e=new r;return e.document=t[0],e},r.prototype.parser=function(r){return this.setMask(r.replace(/\D/g,"").length<=8?this.shortMask:this.longMask),t.prototype.parser.call(this,r)},r.prototype.validator=function(){if("undefined"==typeof this.ctrl.$viewValue||""===this.ctrl.$viewValue)return!0;var t=r.Extract(this.ctrl.$viewValue);if(!t)return!1;if(!r.CheckValidRange(t))return!1;var e=t.substr(0,8);return r.CalculateCheckDigit(e,t.substr(-1))},r.Extract=function(t){var r=String(t).trim().match(/(?:\d{8,9}|\d{2,3}-\d{3}-\d{3})/);return r&&r.length?("0"+r[0].replace(/-/g,"")).substr(-9):null},r.CheckValidRange=function(t){var r=Number(t);return r>=1e7&&15e7>=r},r.CalculateCheckDigit=function(t,e){var s=[3,2,7,6,5,4,3,2],i=r.CalculateCheckDigitFor(s,t);return 10===i?r.ReCalculateCheckDigit(t,e):i===Number(e)},r.ReCalculateCheckDigit=function(t,e){var s=[7,4,3,2,5,2,7,6],i=r.CalculateCheckDigitFor(s,t);return 10===i?!1:i===Number(e)},r.CalculateCheckDigitFor=function(t,r){for(var e=0,s=0;s<t.length;s++)e+=Number(r.charAt(s))*t[s];var i=e%11;return 0===i?0:11-i},r}(t.SimpleInputMask);t.NZIrdNumber=r,t.module.directive("nzIrdNumber",["$document",r.Factory])}(s||(s={}));var s,i=this.__extends||function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);e.prototype=r.prototype,t.prototype=new e};!function(t){var r=function(t){function r(){t.call(this),this.defaultMask="999999999999",this.mobileMask="999 999 999 999",this.landlineMask="99 999 9999",this.specialMask="9999 999 999 9999",this.minLength=0,this.setMask(this.defaultMask)}return i(r,t),r.Factory=function(t){var e=new r;return e.document=t[0],e},r.prototype.parser=function(e){var s=r.sanitise(e);return s.match(/^0[89]0/)?(this.setMask(this.specialMask),this.minLength=10):s.match(/^02/)?(this.setMask(this.mobileMask),this.minLength=9):s.match(/^0[34679]/)?(this.setMask(this.landlineMask),this.minLength=9):(this.setMask(this.defaultMask),this.minLength=9),t.prototype.parser.call(this,s)},r.prototype.validator=function(){var t=r.sanitise(this.ctrl.$viewValue);return 0===t.length||t.length>=this.minLength},r.sanitise=function(t){return String(t).replace(/\D/g,"")},r}(t.SimpleInputMask);t.NZPhoneNumber=r,t.module.directive("nzPhoneNumber",["$document",r.Factory])}(s||(s={}))}(window,window.angular);
//# sourceMappingURL=angular-nz-input-formats.min.js.map