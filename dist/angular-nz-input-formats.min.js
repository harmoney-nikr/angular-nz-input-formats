/*!
 * angular-nz-input-formats
 * Angular directives to validate and format NZ-specific input types
 * @version v0.1.0
 * @link https://github.com/nikrolls/angular-nz-input-formats
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e,r){var n;!function(t){t.module=e.module("nzInputFormats",[])}(n||(n={}));var n;!function(t){var n=function(){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.require="ngModel",this.restrict="A",this.link=null,this.name=r,this.options={mask:null},this.mask=null,this.maskChars={"*":/./,A:/[A-Za-z]/,9:/[0-9]/},this.scope=null,this.elem=null,this.ctrl=null,this.document=null,this.lastLen=0,this.setMask(t),n&&(this.maskChars=n),this.link=e.bind(this,this.doLink)}return t.prototype.setMask=function(t){t!==this.options.mask&&(this.mask=t.split(""),this.options.mask=t,this.elem&&this.parser(this.elem.val()))},t.Factory=function(e){var r=new t;return r.document=e[0],r},t.prototype.doLink=function(t,r,n,s){this.scope=t,this.elem=r,this.ctrl=s,n.$observe(this.name,e.bind(this,this.processAttributeValue)),s.$formatters.push(e.bind(this,this.formatter)),s.$parsers.push(e.bind(this,this.parser)),s.$validators[this.name]=e.bind(this,this.validator)},t.prototype.processAttributeValue=function(t){var r=this.scope.$eval(t);r&&(r.mask&&this.setMask(r.mask),this.options=e.extend(this.options,r),this.ctrl.$$parseAndValidate())},t.prototype.formatter=function(t){var e=this;if(void 0===t&&(t=""),!this.mask)return t;var r="",n=0;return this.mask.some(function(s){return n>=t.length?!0:void(r+=e.maskChars.hasOwnProperty(s)?t.charAt(n++):s)}),r},t.prototype.parser=function(t){var e=this;if(void 0===t&&(t=""),!this.mask)return t;var r=t.split(""),n=t.length,s=[];this.mask.every(function(t){var n=r[0];if(e.maskChars.hasOwnProperty(t)){for(;r.length&&!r[0].match(e.maskChars[t]);)r.shift();r.length&&s.push(r.shift())}else n===t&&r.shift();return r.length>0});var i=s.join(""),a=this.formatter(i),o=this.elem[0].selectionStart;if(n>this.lastLen){var h=this.mask[o-1],u=this.maskChars.hasOwnProperty(h);if(u)t.charAt(o-1).match(this.maskChars[h])||o--;else for(;o<a.length&&!this.maskChars.hasOwnProperty(this.mask[o-1]);)o++}return this.lastLen=a.length,this.elem.val(a),this.ctrl.$setViewValue(a),this.document.activeElement===this.elem[0]&&(this.elem[0].selectionStart=this.elem[0].selectionEnd=o),i},t.prototype.validator=function(){return"undefined"==typeof this.ctrl.$viewValue||""===this.ctrl.$viewValue?!0:this.mask?this.ctrl.$viewValue.length===this.mask.length:!0},t}();t.SimpleInputMask=n,t.module.directive("nzSimpleInputMask",["$document",n.Factory])}(n||(n={}));var n,s=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r};!function(t){var e=function(t){function e(){t.call(this),this.shortMask="99-9999-9999999-99",this.longMask="99-9999-9999999-999",this.options={mask:null,strict:!0},this.prefixes={"01":{name:"ANZ",from:1,to:5699},12:{name:"ASB",from:3e3,to:3499},"02":{name:"BNZ / The Cooperative Bank",from:1,to:1299},31:{name:"Citibank",from:2800,to:2849},25:{name:"ANZ",from:2500,to:2599},30:{name:"HSBC",from:2900,to:2956},38:{name:"Kiwibank",from:9e3,to:9499},"08":{name:"National Australia Bank",from:0,to:9999},"06":{name:"ANZ",from:1,to:1499},11:{name:"ANZ",from:5e3,to:8999},21:{name:"Trust Bank Auckland",from:4800,to:4899},15:{name:"TSB Bank",from:3900,to:3999},18:{name:"Trust Bank Bay of Plenty",from:3500,to:3599},16:{name:"Trust Bank Canterbury",from:4400,to:4499},20:{name:"Trust Bank Central",from:4100,to:4199},14:{name:"Trust Bank Otago",from:4700,to:4799},13:{name:"Trust Bank Southland",from:4900,to:4799},19:{name:"Trust Bank South Canterbury",from:4600,to:4649},17:{name:"Trust Bank Waikato",from:3300,to:3399},22:{name:"Trust Bank Wanganui",from:4e3,to:4049},23:{name:"Trust Bank Wellington",from:3700,to:3799},29:{name:"United Bank",from:0,to:9999},24:{name:"Westland Bank",from:4300,to:4349},"03":{name:"Westpac / RaboBank New Zealand / NZACU",from:1,to:1999}},this.setMask(this.shortMask)}return s(e,t),e.Factory=function(t){var r=new e;return r.document=t[0],r},e.prototype.parser=function(e){this.setMask(e.replace(/\D/g,"").length<=15?this.shortMask:this.longMask);var r=t.prototype.parser.call(this,e);return 15===r.length&&(r=r.substr(0,13)+"0"+r.substr(-2)),r},e.prototype.validator=function(){var e=t.prototype.validator.call(this);if(!this.options.strict)return e;var r=this.ctrl.$viewValue;if("undefined"===r||""===r)return!0;if(r=r.replace(/\D/g,""),r.length<15||r.length>16)return!1;var n=r.substr(0,2);if(this.prefixes.hasOwnProperty(n)){var s=this.prefixes[n],i=r.substr(2,4);if(4===i.length){var a=Number(i);return e&&a>=s.from&&a<=s.to}}return!1},e}(t.SimpleInputMask);t.NZBankNumber=e,t.module.directive("nzBankNumber",["$document",e.Factory])}(n||(n={}));var n,s=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r};!function(t){var e=function(t){function e(){t.call(this),this.shortMask="99-999-999",this.longMask="999-999-999",this.setMask(this.shortMask)}return s(e,t),e.Factory=function(t){var r=new e;return r.document=t[0],r},e.prototype.parser=function(e){return this.setMask(e.replace(/\D/g,"").length<=8?this.shortMask:this.longMask),t.prototype.parser.call(this,e)},e.prototype.validator=function(){if("undefined"==typeof this.ctrl.$viewValue||""===this.ctrl.$viewValue)return!0;var t=e.Extract(this.ctrl.$viewValue);if(!t)return!1;if(!e.CheckValidRange(t))return!1;var r=t.substr(0,8);return e.CalculateCheckDigit(r,t.substr(-1))},e.Extract=function(t){var e=String(t).trim().match(/(?:\d{8,9}|\d{2,3}-\d{3}-\d{3})/);return e&&e.length?("0"+e[0].replace(/-/g,"")).substr(-9):null},e.CheckValidRange=function(t){var e=Number(t);return e>=1e7&&15e7>=e},e.CalculateCheckDigit=function(t,r){var n=[3,2,7,6,5,4,3,2],s=e.CalculateCheckDigitFor(n,t);return 10===s?e.ReCalculateCheckDigit(t,r):s===Number(r)},e.ReCalculateCheckDigit=function(t,r){var n=[7,4,3,2,5,2,7,6],s=e.CalculateCheckDigitFor(n,t);return 10===s?!1:s===Number(r)},e.CalculateCheckDigitFor=function(t,e){for(var r=0,n=0;n<t.length;n++)r+=Number(e.charAt(n))*t[n];var s=r%11;return 0===s?0:11-s},e}(t.SimpleInputMask);t.NZIrdNumber=e,t.module.directive("nzIrdNumber",["$document",e.Factory])}(n||(n={}));var n,s=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r};!function(t){var e=function(t){function e(){t.call(this),this.defaultMask="999999999999",this.mobileMask="999 999 999 999",this.landlineMask="99 999 9999",this.specialMask="9999 999 999 9999",this.minLength=0,this.setMask(this.defaultMask)}return s(e,t),e.Factory=function(t){var r=new e;return r.document=t[0],r},e.prototype.parser=function(e){var r=e.replace(/\D/g,"");return r.match(/^0[89]0/)?(this.setMask(this.specialMask),this.minLength=10):r.match(/^02/)?(this.setMask(this.mobileMask),this.minLength=9):r.match(/^0[34679]/)?(this.setMask(this.landlineMask),this.minLength=9):(this.setMask(this.defaultMask),this.minLength=9),t.prototype.parser.call(this,e)},e.prototype.validator=function(){var t=this.ctrl.$viewValue;return"undefined"===t||""===t?!0:(t=t.replace(/\D/g,""),t.length>=this.minLength)},e}(t.SimpleInputMask);t.NZPhoneNumber=e,t.module.directive("nzPhoneNumber",["$document",e.Factory])}(n||(n={}))}(window,window.angular);
//# sourceMappingURL=angular-nz-input-formats.min.js.map